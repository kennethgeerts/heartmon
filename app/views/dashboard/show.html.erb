<div class="box has-background-grey has-text-centered has-text-light">
  <h1 class="is-title is-size-3">
    <%= @game.client %> – <%= @game.name %>
  </h1>
  <h2 class="is-title is-size-5">
    Starts <%= time_tag @game.start_at %><br />
    Ends <%= time_tag @game.stop_at %>
  </h2>
</div>

<% if @game.running? %>
  <%= turbo_frame_tag 'teams', src: teams_path(by: 'current_heart_rate'), data: { controller: 'refresh' } %>
<% elsif @game.future? %>
  <div class="team-heartbeat">
    <h1 class="is-size-3 has-text-centered">
      This game will start in <%= distance_of_time_in_words(Time.current, @game.start_at) %>.
    </h1>
  </div>
<% elsif @game.ended? %>
  <div class="team-heartbeat">
    <h1 class="is-size-3 has-text-centered">
      This game has ended.
    </h1>
  </div>
<% end %>

<%= tag.div data: { controller: 'live-heartbeat', 'live-heartbeat-team-value': @team }, class: 'live-heartbeat' do %>
  <p class="has-text-right">
    <span class="tag is-medium">
      <%= @team.name %>&nbsp;
      <span data-live-heartbeat-target="heartEmoji">🤍</span>
    </span>
  </p>
  <h1 data-live-heartbeat-target="heartRate" class="is-size-1 has-text-centered has-text-light has-text-weight-semibold animate__animated animate__heartBeat"></h1>
  <h2 data-live-heartbeat-target="measuredAt" class="is-size-6 has-text-centered has-text-light"></h2>
<% end %>
